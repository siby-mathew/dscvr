{"version":3,"sources":["../src/index.ts","../src/register.ts","../src/wallet.ts","../src/abstract-wallet.ts","../src/api/dscvr.ts"],"sourcesContent":["export * as CanvasInterface from '@dscvr-one/canvas-wallet-interface';\r\nexport { registerCanvasWallet } from './register';\r\nexport { CANVAS_WALLET_NAME, type CanvasWallet } from './wallet';\r\n","import { getWallets } from '@wallet-standard/core';\r\nimport { registerWallet } from '@wallet-standard/wallet';\r\nimport type { CanvasClient } from '@dscvr-one/canvas-client-sdk';\r\nimport { CANVAS_WALLET_NAME, CanvasWallet } from './wallet';\r\n\r\nexport const registerCanvasWallet = (canvasClient: CanvasClient) => {\r\n  const { get } = getWallets();\r\n  const wallets = get();\r\n  const exists = wallets.find((wallet) => wallet.name === CANVAS_WALLET_NAME);\r\n  if (exists) {\r\n    // Since the user could potentially instantiate the canvas client more than once\r\n    // we need to update the canvas client in the wallet\r\n    // A common scenario is React testing environment that calls hooks twice.\r\n    (exists as CanvasWallet).setCanvasClient(canvasClient);\r\n    return exists;\r\n  }\r\n\r\n  const wallet = new CanvasWallet(canvasClient);\r\n  registerWallet(wallet);\r\n  return wallet;\r\n};\r\n","import * as bs58 from 'bs58';\r\nimport {\r\n  getEndpointForChain,\r\n  SOLANA_CHAINS,\r\n  type SolanaChain,\r\n  type SolanaSignAndSendTransactionFeature,\r\n  type SolanaSignAndSendTransactionMethod,\r\n  type SolanaSignAndSendTransactionOutput,\r\n  type SolanaSignMessageFeature,\r\n  type SolanaSignMessageMethod,\r\n  type SolanaSignMessageOutput,\r\n  type SolanaSignTransactionFeature,\r\n  type SolanaSignTransactionMethod,\r\n  type SolanaSignTransactionOutput,\r\n} from '@solana/wallet-standard';\r\nimport { PublicKey } from '@solana/web3.js';\r\nimport type {\r\n  StandardConnectFeature,\r\n  StandardConnectMethod,\r\n  StandardDisconnectFeature,\r\n  StandardDisconnectMethod,\r\n  StandardEventsFeature,\r\n  Wallet,\r\n  WalletAccount,\r\n} from '@wallet-standard/core';\r\nimport type { WalletName } from '@solana/wallet-adapter-base';\r\nimport type { CanvasClient } from '@dscvr-one/canvas-client-sdk';\r\nimport * as CanvasInterface from '@dscvr-one/canvas-wallet-interface';\r\nimport { AbstractWallet } from './abstract-wallet';\r\nimport { validateHostMessage } from './api/dscvr';\r\n\r\n// source: https://github.com/wallet-standard/wallet-standard/blob/master/packages/example/wallets/src/solanaWallet.ts\r\n\r\nexport const CANVAS_WALLET_NAME = 'DSCVR Canvas' as WalletName;\r\nexport class CanvasWallet extends AbstractWallet implements Wallet {\r\n  #underlyingWalletName: string | undefined;\r\n  #name = CANVAS_WALLET_NAME;\r\n  #icon =\r\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDE2QzAgNy4xNjM0NCA3LjE2MzQ0IDAgMTYgMEg5MkMxMDAuODM3IDAgMTA4IDcuMTYzNDQgMTA4IDE2VjkyQzEwOCAxMDAuODM3IDEwMC44MzcgMTA4IDkyIDEwOEgxNkM3LjE2MzQ0IDEwOCAwIDEwMC44MzcgMCA5MlYxNloiIGZpbGw9IiM0RjQ2RTUiLz4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzMDgwXzE3NjQ1KSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNODcuOTE2NyA1My45OTY2Qzg3LjkxNjcgNjMuMDIyIDg0LjM2MzIgNzEuNjAwNyA3Ny45ODA2IDc3Ljk4MjRDNzEuNjAzIDg0LjM2MjQgNjMuMDI1NCA4Ny45MTYzIDU0LjAwMTIgODcuOTE2M0M1MC4xNDQ4IDg3LjkxNjMgNDYuMzcwNSA4Ny4yNjg4IDQyLjgxMzcgODYuMDI4OUMzOC4wNDcyIDg0LjM2MjQgMzMuNjcyMyA4MS42MzY3IDMwLjAxODQgNzcuOTgyNEMyMy42MzU4IDcxLjYwMDcgMjAuMDg0IDYzLjAyMzcgMjAuMDg0IDUzLjk5NjZDMjAuMDg0IDUwLjA1NDUgMjAuNzY0OSA0Ni4xNTA5IDIyLjEwNjcgNDIuNDQ0N0MyMi40OTMxIDQxLjM4MjIgMjIuOTMxNSA0MC4zMzk4IDIzLjQyMTcgMzkuMzE5MUwyMy44NiAzOC40MDM4TDI0LjEyOTQgMzguNTE0M0MyNS4wMjYxIDM4Ljg4NDEgMjUuNDg0NSAzOS44NzQ2IDI1LjE4NjcgNDAuNzk5OUMyMC41MjA2IDU1LjI1MTYgMjUuNzk5IDcxLjMyMTMgMzkuNTg2NCA3OC40NTkzQzUwLjc0NTUgODQuMjMzNiA2NC43MDY4IDgyLjY5NTkgNzMuNzAxIDczLjcwMDZDNzUuNjQxNyA3MS43NTk2IDc3LjI2NDUgNjkuNTcxMSA3OC41Mzk0IDY3LjIwODVDNzguOTg0NCA2Ni4zODAyIDc5LjM4OTMgNjUuNTMwMiA3OS43NDczIDY0LjY2MzVDODEuMTMyNiA2MS4zMjA0IDgxLjg2MDMgNTcuNzA0NSA4MS44NjAzIDUzLjk5NjZDODEuODYwMyA0Ni41ODA5IDc4Ljk0MjYgMzkuNTM2NiA3My43MDEgMzQuMjkyN0M2OC40NTk0IDI5LjA1MDUgNjEuNDE0MyAyNi4xMzI0IDU0LjAwMTIgMjYuMTMyNEM1MS41NTE5IDI2LjEzMjQgNDkuMTE0MyAyNi40NDUzIDQ2Ljc3NTQgMjcuMDc0NEw0NS41MjkgMjcuNDQwOEM0MS43NjggMjkuMjAyOCAzOC41Njc1IDMyLjAwODggMzYuMzE5IDM1LjUwMjVDMzQuMDMzNiAzOS4wNTk3IDMyLjg0MDggNDMuMTY3NSAzMi44NDA4IDQ3LjM5NzRDMzIuODQwOCA0OC4xNzIxIDMyLjg3OTMgNDguOTQxOCAzMi45NTk2IDQ5LjcwMzFDMzMuNDcxNSA1NC42MTQxIDM1LjYwOCA1OS4yMDM3IDM5LjA5NzkgNjIuNzc5NEM0Ni4xODY1IDcwLjA0MTIgNjAuNzg4NiA3MC41NzUgNjUuODgzIDYwLjgzMThDNjguMjgyMSA1Ni4yMzM4IDY3Ljg0ODggNTAuNjkyIDY0Ljc0MiA0Ni41MzkxQzYxLjA2OCA0MS42MzE1IDU1LjIyMjUgNDAuNDY4NiA0OS42MzQ2IDQyLjI4NEg0OS42MzI5TDUwLjAwNiA2NS44MTNDNDcuMzc2IDY1LjI4MjYgNDQuMzI0NCA2NC4yMzY4IDQxLjgzMTYgNjEuNjQ2Nkw0MS41MjM4IDUyLjE4NzlMNDEuMDExOCAzNi41NjMzTDQxLjYxNzUgMzYuMjUwNEM1MS4zOTYzIDMxLjE4MDUgNjAuOTAyNCAzMC41NDY0IDY5LjE3MzggMzguODIwNUM3My4yMTA4IDQyLjg1OTYgNzUuNDU3NyA0OC4yODU5IDc1LjQ1NzcgNTMuOTk2NkM3NS40NTc3IDU5LjcwNzQgNzMuMjA5MSA2NS4xMzUzIDY5LjE3MzggNjkuMTcxMkM1OS4zMjE0IDc5LjAyODEgNDMuOTI0NiA3Ni4zNzYxIDM0Ljc2NDggNjYuOTk0M0MyOS42MzM2IDYxLjczODcgMjYuNzgyOCA1NC43NDYzIDI2Ljc4MjggNDcuMzk3NEMyNi43ODI4IDQ0LjQ4OTQgMjcuMjMxMSA0MS42MDE0IDI4LjEyNjIgMzguODAzN0MzMS40NzIyIDI5LjMwNDggMzguMjc4MSAyMi44NzYzIDQ3LjQ0MjkgMjAuODA2NUM0OS41MTI0IDIwLjMzOCA1MS43MDA4IDIwLjA5MzcgNTMuOTk2MSAyMC4wODM3QzU0LjM2NzYgMjAuMDgzNyA1NC43MzczIDIwLjA4MiA1NS4xMDU0IDIwLjA5MzdDNjMuNzM4MiAyMC4zNjgxIDcxLjg3NzQgMjMuOTA1MyA3Ny45ODA2IDMwLjAxMjZDODQuMzYzMiAzNi4zOTI2IDg3LjkxNjcgNDQuOTcxMyA4Ny45MTY3IDUzLjk5NjZaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTMwODBfMTc2NDUpIi8+CjwvZz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMzA4MF8xNzY0NSIgeDE9IjI0IiB5MT0iMzAuNSIgeDI9Ijc2IiB5Mj0iODQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0JBRjNGMSIvPgo8c3RvcCBvZmZzZXQ9IjAuMjIxOTYzIiBzdG9wLWNvbG9yPSIjRTFFMkY5Ii8+CjxzdG9wIG9mZnNldD0iMC40MzExMjUiIHN0b3AtY29sb3I9IiNDMUYxRTkiLz4KPHN0b3Agb2Zmc2V0PSIwLjYzODk0IiBzdG9wLWNvbG9yPSIjREJDOEYwIi8+CjxzdG9wIG9mZnNldD0iMC44MDQ5ODUiIHN0b3AtY29sb3I9IiNBQUM3RUQiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQzFDMEY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMwODBfMTc2NDUiPgo8cmVjdCB3aWR0aD0iNjgiIGhlaWdodD0iNjgiIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMCAyMCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' as const;\r\n\r\n  get name() {\r\n    return this.#name;\r\n  }\r\n\r\n  get icon() {\r\n    return this.#icon;\r\n  }\r\n\r\n  get chains() {\r\n    return SOLANA_CHAINS.slice();\r\n  }\r\n\r\n  get features(): StandardConnectFeature &\r\n    StandardDisconnectFeature &\r\n    StandardEventsFeature &\r\n    SolanaSignAndSendTransactionFeature &\r\n    SolanaSignTransactionFeature &\r\n    SolanaSignMessageFeature {\r\n    return {\r\n      'standard:connect': {\r\n        version: '1.0.0',\r\n        connect: this.#connect,\r\n      },\r\n      'standard:disconnect': {\r\n        version: '1.0.0',\r\n        disconnect: this.#disconnect,\r\n      },\r\n      'standard:events': {\r\n        version: '1.0.0',\r\n        on: this._on,\r\n      },\r\n      'solana:signAndSendTransaction': {\r\n        version: '1.0.0',\r\n        supportedTransactionVersions: ['legacy'],\r\n        signAndSendTransaction: this.#signAndSendTransaction,\r\n      },\r\n      'solana:signTransaction': {\r\n        version: '1.0.0',\r\n        supportedTransactionVersions: ['legacy'],\r\n        signTransaction: this.#signTransaction,\r\n      },\r\n      'solana:signMessage': {\r\n        version: '1.0.0',\r\n        signMessage: this.#signMessage,\r\n      },\r\n    };\r\n  }\r\n\r\n  private options: { canvasClient: CanvasClient };\r\n\r\n  constructor(canvasClient: CanvasClient) {\r\n    super();\r\n\r\n    this.options = { canvasClient };\r\n    if (new.target === CanvasWallet) {\r\n      Object.freeze(this);\r\n    }\r\n  }\r\n\r\n  setCanvasClient(canvasClient: CanvasClient) {\r\n    this.options.canvasClient = canvasClient;\r\n  }\r\n\r\n  #connect: StandardConnectMethod = async ({ silent } = {}) => {\r\n    if (silent) return { accounts: this.accounts };\r\n    const canvasResponse = await this.options.canvasClient.connectWallet(\r\n      this.chains[0],\r\n    );\r\n\r\n    const isValidResponse = await validateHostMessage(canvasResponse);\r\n    if (!isValidResponse) {\r\n      throw new Error('invalid message');\r\n    }\r\n\r\n    if (!canvasResponse.untrusted.success) return { accounts: this.accounts };\r\n\r\n    this.#underlyingWalletName = canvasResponse.untrusted.walletName;\r\n    const account: WalletAccount = {\r\n      address: canvasResponse.untrusted.address,\r\n      publicKey: new PublicKey(canvasResponse.untrusted.address).toBytes(),\r\n      chains: SOLANA_CHAINS,\r\n      features: [\r\n        'solana:signAndSendTransaction',\r\n        'solana:signTransaction',\r\n        'solana:signMessage',\r\n      ],\r\n    };\r\n    this._accounts.push(account);\r\n\r\n    return { accounts: this.accounts };\r\n  };\r\n\r\n  #disconnect: StandardDisconnectMethod = async () => {\r\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\r\n\r\n    const canvasResponse = await this.sendMessage(\r\n      {\r\n        type: 'wallet:disconnect-request',\r\n        payload: {\r\n          name: this.#underlyingWalletName,\r\n        },\r\n      },\r\n      CanvasInterface.disconnectResponseSchema,\r\n    );\r\n\r\n    if (!canvasResponse.untrusted.success) {\r\n      throw new Error(canvasResponse.untrusted.error);\r\n    }\r\n\r\n    this._accounts.splice(0, this._accounts.length);\r\n    this.#underlyingWalletName = undefined;\r\n  };\r\n\r\n  #signAndSendTransaction: SolanaSignAndSendTransactionMethod = async (\r\n    ...inputs\r\n  ) => {\r\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\r\n\r\n    const outputs: SolanaSignAndSendTransactionOutput[] = [];\r\n    for (const { transaction, account, chain, options } of inputs) {\r\n      if (!account.features.includes('solana:signAndSendTransaction'))\r\n        throw new Error('invalid feature');\r\n\r\n      if (!this.chains.includes(chain as SolanaChain))\r\n        throw new Error('invalid chain');\r\n\r\n      const rpcEndpoint = getEndpointForChain(chain as SolanaChain);\r\n\r\n      const unsignedTx = bs58.encode(transaction);\r\n\r\n      const canvasResponse = await this.sendMessage(\r\n        {\r\n          type: 'wallet:send-transaction-request',\r\n          payload: {\r\n            name: this.#underlyingWalletName,\r\n            rpcEndpoint,\r\n            unsignedTx,\r\n            chain,\r\n            options,\r\n          },\r\n        },\r\n        CanvasInterface.sendTransactionResponseSchema,\r\n      );\r\n\r\n      if (!canvasResponse.untrusted.success) {\r\n        throw new Error(canvasResponse.untrusted.error);\r\n      }\r\n\r\n      outputs.push({\r\n        signature: bs58.decode(canvasResponse.untrusted.signedTx),\r\n      });\r\n    }\r\n\r\n    return outputs;\r\n  };\r\n\r\n  #signTransaction: SolanaSignTransactionMethod = async (...inputs) => {\r\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\r\n    if (inputs.length === 0) return [];\r\n\r\n    const transactions: { chain: string | undefined; unsignedTx: string }[] =\r\n      [];\r\n    for (const { transaction, account, chain } of inputs) {\r\n      if (!account.features.includes('solana:signTransaction'))\r\n        throw new Error('invalid feature');\r\n\r\n      if (chain && !this.chains.includes(chain as SolanaChain))\r\n        throw new Error('invalid chain');\r\n      const unsignedTx = bs58.encode(transaction);\r\n      transactions.push({\r\n        unsignedTx,\r\n        chain,\r\n      });\r\n    }\r\n\r\n    const isSingleTransation = transactions.length === 1;\r\n    const canvasResponse = isSingleTransation\r\n      ? await this.sendMessage(\r\n          {\r\n            type: 'wallet:sign-transaction-request',\r\n            payload: {\r\n              name: this.#underlyingWalletName,\r\n              unsignedTx: transactions[0].unsignedTx,\r\n              chain: transactions[0].chain,\r\n            },\r\n          },\r\n          CanvasInterface.signTransactionResponseSchema,\r\n        )\r\n      : await this.sendMessage(\r\n          {\r\n            type: 'wallet:sign-all-transactions-request',\r\n            payload: {\r\n              name: this.#underlyingWalletName,\r\n              unsignedTxs: transactions.map((t) => t.unsignedTx),\r\n            },\r\n          },\r\n          CanvasInterface.signAllTransactionsResponseSchema,\r\n        );\r\n\r\n    if (!canvasResponse.untrusted.success) {\r\n      throw new Error(canvasResponse.untrusted.error);\r\n    }\r\n\r\n    const signedTxs =\r\n      'signedTx' in canvasResponse.untrusted\r\n        ? [canvasResponse.untrusted.signedTx]\r\n        : canvasResponse.untrusted.signedTxs;\r\n    const outputs: SolanaSignTransactionOutput[] = signedTxs.map(\r\n      (signedTx) => ({ signedTransaction: bs58.decode(signedTx) }),\r\n    );\r\n\r\n    return outputs;\r\n  };\r\n\r\n  #signMessage: SolanaSignMessageMethod = async (...inputs) => {\r\n    if (!this.#underlyingWalletName) throw new Error('wallet not connected');\r\n\r\n    const outputs: SolanaSignMessageOutput[] = [];\r\n    for (const { account, message } of inputs) {\r\n      if (!account.features.includes('solana:signMessage'))\r\n        throw new Error('invalid feature');\r\n\r\n      const canvasResponse = await this.sendMessage(\r\n        {\r\n          type: 'wallet:sign-message-request',\r\n          payload: {\r\n            name: this.#underlyingWalletName,\r\n            unsignedMessage: message,\r\n          },\r\n        },\r\n        CanvasInterface.signMessageResponseSchema,\r\n      );\r\n      if (!canvasResponse.untrusted.success) {\r\n        throw new Error(canvasResponse.untrusted.error);\r\n      }\r\n\r\n      outputs.push({\r\n        signedMessage: message,\r\n        signature: canvasResponse.untrusted.signedMessage,\r\n      });\r\n    }\r\n\r\n    return outputs;\r\n  };\r\n\r\n  private async validateResponse<T extends CanvasInterface.HostMessage>(\r\n    canvasResponse: T,\r\n  ) {\r\n    const isValidResponse = await validateHostMessage(canvasResponse);\r\n    if (!isValidResponse) {\r\n      throw new Error('invalid message');\r\n    }\r\n\r\n    const name = canvasResponse.untrusted.name;\r\n    if (name !== this.#underlyingWalletName) {\r\n      throw new Error('Unexpected wallet name');\r\n    }\r\n\r\n    return canvasResponse;\r\n  }\r\n\r\n  private async sendMessage<T extends CanvasInterface.HostMessageSchema>(\r\n    message: CanvasInterface.ClientMessage,\r\n    schema: T,\r\n  ) {\r\n    const canvasResponse =\r\n      await this.options.canvasClient.sendMessageAndWaitResponse(\r\n        message,\r\n        schema,\r\n      );\r\n    return await this.validateResponse(canvasResponse);\r\n  }\r\n}\r\n","import type {\r\n  StandardEventsListeners,\r\n  StandardEventsNames,\r\n  StandardEventsOnMethod,\r\n  Wallet,\r\n  WalletAccount,\r\n} from '@wallet-standard/core';\r\n\r\n// source: https://github.com/wallet-standard/wallet-standard/blob/master/packages/example/wallets/src/abstractWallet.ts\r\nexport abstract class AbstractWallet implements Wallet {\r\n  #listeners: { [E in StandardEventsNames]?: StandardEventsListeners[E][] } =\r\n    {};\r\n\r\n  protected _accounts: WalletAccount[];\r\n\r\n  get version() {\r\n    return '1.0.0' as const;\r\n  }\r\n\r\n  abstract get name(): Wallet['name'];\r\n  abstract get icon(): Wallet['icon'];\r\n  abstract get chains(): Wallet['chains'];\r\n  abstract get features(): Wallet['features'];\r\n\r\n  get accounts() {\r\n    return this._accounts.slice();\r\n  }\r\n\r\n  constructor() {\r\n    this._accounts = [];\r\n  }\r\n\r\n  protected _on: StandardEventsOnMethod = (event, listener) => {\r\n    this.#listeners[event]?.push(listener) ||\r\n      (this.#listeners[event] = [listener]);\r\n    return (): void => this._off(event, listener);\r\n  };\r\n\r\n  protected _emit<E extends StandardEventsNames>(\r\n    event: E,\r\n    ...args: Parameters<StandardEventsListeners[E]>\r\n  ): void {\r\n    // eslint-disable-next-line prefer-spread\r\n    this.#listeners[event]?.forEach((listener) => listener.apply(null, args));\r\n  }\r\n\r\n  protected _off<E extends StandardEventsNames>(\r\n    event: E,\r\n    listener: StandardEventsListeners[E],\r\n  ): void {\r\n    this.#listeners[event] = this.#listeners[event]?.filter(\r\n      (existingListener) => listener !== existingListener,\r\n    );\r\n  }\r\n}\r\n","import type { CanvasInterface } from '@dscvr-one/canvas-client-sdk';\r\n\r\nexport const validateHostMessage = async (\r\n  message: CanvasInterface.BaseHostMessage,\r\n) => {\r\n  // TODO: connect with graphql\r\n  return !!message;\r\n};\r\n"],"mappings":";AAAA,YAAYA,sBAAqB;;;ACAjC,SAAS,kBAAkB;AAC3B,SAAS,sBAAsB;;;ACD/B,YAAY,UAAU;AACtB;AAAA,EACE;AAAA,EACA;AAAA,OAWK;AACP,SAAS,iBAAiB;AAY1B,YAAY,qBAAqB;;;AClB1B,IAAe,iBAAf,MAAgD;AAAA,EACrD,aACE,CAAC;AAAA,EAEO;AAAA,EAEV,IAAI,UAAU;AACZ,WAAO;AAAA,EACT;AAAA,EAOA,IAAI,WAAW;AACb,WAAO,KAAK,UAAU,MAAM;AAAA,EAC9B;AAAA,EAEA,cAAc;AACZ,SAAK,YAAY,CAAC;AAAA,EACpB;AAAA,EAEU,MAA8B,CAAC,OAAO,aAAa;AAC3D,SAAK,WAAW,KAAK,GAAG,KAAK,QAAQ,MAClC,KAAK,WAAW,KAAK,IAAI,CAAC,QAAQ;AACrC,WAAO,MAAY,KAAK,KAAK,OAAO,QAAQ;AAAA,EAC9C;AAAA,EAEU,MACR,UACG,MACG;AAEN,SAAK,WAAW,KAAK,GAAG,QAAQ,CAAC,aAAa,SAAS,MAAM,MAAM,IAAI,CAAC;AAAA,EAC1E;AAAA,EAEU,KACR,OACA,UACM;AACN,SAAK,WAAW,KAAK,IAAI,KAAK,WAAW,KAAK,GAAG;AAAA,MAC/C,CAAC,qBAAqB,aAAa;AAAA,IACrC;AAAA,EACF;AACF;;;ACpDO,IAAM,sBAAsB,OACjC,YACG;AAEH,SAAO,CAAC,CAAC;AACX;;;AF0BO,IAAM,qBAAqB;AAC3B,IAAM,eAAN,MAAM,sBAAqB,eAAiC;AAAA,EACjE;AAAA,EACA,QAAQ;AAAA,EACR,QACE;AAAA,EAEF,IAAI,OAAO;AACT,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,OAAO;AACT,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,cAAc,MAAM;AAAA,EAC7B;AAAA,EAEA,IAAI,WAKuB;AACzB,WAAO;AAAA,MACL,oBAAoB;AAAA,QAClB,SAAS;AAAA,QACT,SAAS,KAAK;AAAA,MAChB;AAAA,MACA,uBAAuB;AAAA,QACrB,SAAS;AAAA,QACT,YAAY,KAAK;AAAA,MACnB;AAAA,MACA,mBAAmB;AAAA,QACjB,SAAS;AAAA,QACT,IAAI,KAAK;AAAA,MACX;AAAA,MACA,iCAAiC;AAAA,QAC/B,SAAS;AAAA,QACT,8BAA8B,CAAC,QAAQ;AAAA,QACvC,wBAAwB,KAAK;AAAA,MAC/B;AAAA,MACA,0BAA0B;AAAA,QACxB,SAAS;AAAA,QACT,8BAA8B,CAAC,QAAQ;AAAA,QACvC,iBAAiB,KAAK;AAAA,MACxB;AAAA,MACA,sBAAsB;AAAA,QACpB,SAAS;AAAA,QACT,aAAa,KAAK;AAAA,MACpB;AAAA,IACF;AAAA,EACF;AAAA,EAEQ;AAAA,EAER,YAAY,cAA4B;AACtC,UAAM;AAEN,SAAK,UAAU,EAAE,aAAa;AAC9B,QAAI,eAAe,eAAc;AAC/B,aAAO,OAAO,IAAI;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,gBAAgB,cAA4B;AAC1C,SAAK,QAAQ,eAAe;AAAA,EAC9B;AAAA,EAEA,WAAkC,OAAO,EAAE,OAAO,IAAI,CAAC,MAAM;AAC3D,QAAI,OAAQ,QAAO,EAAE,UAAU,KAAK,SAAS;AAC7C,UAAM,iBAAiB,MAAM,KAAK,QAAQ,aAAa;AAAA,MACrD,KAAK,OAAO,CAAC;AAAA,IACf;AAEA,UAAM,kBAAkB,MAAM,oBAAoB,cAAc;AAChE,QAAI,CAAC,iBAAiB;AACpB,YAAM,IAAI,MAAM,iBAAiB;AAAA,IACnC;AAEA,QAAI,CAAC,eAAe,UAAU,QAAS,QAAO,EAAE,UAAU,KAAK,SAAS;AAExE,SAAK,wBAAwB,eAAe,UAAU;AACtD,UAAM,UAAyB;AAAA,MAC7B,SAAS,eAAe,UAAU;AAAA,MAClC,WAAW,IAAI,UAAU,eAAe,UAAU,OAAO,EAAE,QAAQ;AAAA,MACnE,QAAQ;AAAA,MACR,UAAU;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AACA,SAAK,UAAU,KAAK,OAAO;AAE3B,WAAO,EAAE,UAAU,KAAK,SAAS;AAAA,EACnC;AAAA,EAEA,cAAwC,YAAY;AAClD,QAAI,CAAC,KAAK,sBAAuB,OAAM,IAAI,MAAM,sBAAsB;AAEvE,UAAM,iBAAiB,MAAM,KAAK;AAAA,MAChC;AAAA,QACE,MAAM;AAAA,QACN,SAAS;AAAA,UACP,MAAM,KAAK;AAAA,QACb;AAAA,MACF;AAAA,MACgB;AAAA,IAClB;AAEA,QAAI,CAAC,eAAe,UAAU,SAAS;AACrC,YAAM,IAAI,MAAM,eAAe,UAAU,KAAK;AAAA,IAChD;AAEA,SAAK,UAAU,OAAO,GAAG,KAAK,UAAU,MAAM;AAC9C,SAAK,wBAAwB;AAAA,EAC/B;AAAA,EAEA,0BAA8D,UACzD,WACA;AACH,QAAI,CAAC,KAAK,sBAAuB,OAAM,IAAI,MAAM,sBAAsB;AAEvE,UAAM,UAAgD,CAAC;AACvD,eAAW,EAAE,aAAa,SAAS,OAAO,QAAQ,KAAK,QAAQ;AAC7D,UAAI,CAAC,QAAQ,SAAS,SAAS,+BAA+B;AAC5D,cAAM,IAAI,MAAM,iBAAiB;AAEnC,UAAI,CAAC,KAAK,OAAO,SAAS,KAAoB;AAC5C,cAAM,IAAI,MAAM,eAAe;AAEjC,YAAM,cAAc,oBAAoB,KAAoB;AAE5D,YAAM,aAAkB,YAAO,WAAW;AAE1C,YAAM,iBAAiB,MAAM,KAAK;AAAA,QAChC;AAAA,UACE,MAAM;AAAA,UACN,SAAS;AAAA,YACP,MAAM,KAAK;AAAA,YACX;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAAA,QACF;AAAA,QACgB;AAAA,MAClB;AAEA,UAAI,CAAC,eAAe,UAAU,SAAS;AACrC,cAAM,IAAI,MAAM,eAAe,UAAU,KAAK;AAAA,MAChD;AAEA,cAAQ,KAAK;AAAA,QACX,WAAgB,YAAO,eAAe,UAAU,QAAQ;AAAA,MAC1D,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,mBAAgD,UAAU,WAAW;AACnE,QAAI,CAAC,KAAK,sBAAuB,OAAM,IAAI,MAAM,sBAAsB;AACvE,QAAI,OAAO,WAAW,EAAG,QAAO,CAAC;AAEjC,UAAM,eACJ,CAAC;AACH,eAAW,EAAE,aAAa,SAAS,MAAM,KAAK,QAAQ;AACpD,UAAI,CAAC,QAAQ,SAAS,SAAS,wBAAwB;AACrD,cAAM,IAAI,MAAM,iBAAiB;AAEnC,UAAI,SAAS,CAAC,KAAK,OAAO,SAAS,KAAoB;AACrD,cAAM,IAAI,MAAM,eAAe;AACjC,YAAM,aAAkB,YAAO,WAAW;AAC1C,mBAAa,KAAK;AAAA,QAChB;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,qBAAqB,aAAa,WAAW;AACnD,UAAM,iBAAiB,qBACnB,MAAM,KAAK;AAAA,MACT;AAAA,QACE,MAAM;AAAA,QACN,SAAS;AAAA,UACP,MAAM,KAAK;AAAA,UACX,YAAY,aAAa,CAAC,EAAE;AAAA,UAC5B,OAAO,aAAa,CAAC,EAAE;AAAA,QACzB;AAAA,MACF;AAAA,MACgB;AAAA,IAClB,IACA,MAAM,KAAK;AAAA,MACT;AAAA,QACE,MAAM;AAAA,QACN,SAAS;AAAA,UACP,MAAM,KAAK;AAAA,UACX,aAAa,aAAa,IAAI,CAAC,MAAM,EAAE,UAAU;AAAA,QACnD;AAAA,MACF;AAAA,MACgB;AAAA,IAClB;AAEJ,QAAI,CAAC,eAAe,UAAU,SAAS;AACrC,YAAM,IAAI,MAAM,eAAe,UAAU,KAAK;AAAA,IAChD;AAEA,UAAM,YACJ,cAAc,eAAe,YACzB,CAAC,eAAe,UAAU,QAAQ,IAClC,eAAe,UAAU;AAC/B,UAAM,UAAyC,UAAU;AAAA,MACvD,CAAC,cAAc,EAAE,mBAAwB,YAAO,QAAQ,EAAE;AAAA,IAC5D;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,eAAwC,UAAU,WAAW;AAC3D,QAAI,CAAC,KAAK,sBAAuB,OAAM,IAAI,MAAM,sBAAsB;AAEvE,UAAM,UAAqC,CAAC;AAC5C,eAAW,EAAE,SAAS,QAAQ,KAAK,QAAQ;AACzC,UAAI,CAAC,QAAQ,SAAS,SAAS,oBAAoB;AACjD,cAAM,IAAI,MAAM,iBAAiB;AAEnC,YAAM,iBAAiB,MAAM,KAAK;AAAA,QAChC;AAAA,UACE,MAAM;AAAA,UACN,SAAS;AAAA,YACP,MAAM,KAAK;AAAA,YACX,iBAAiB;AAAA,UACnB;AAAA,QACF;AAAA,QACgB;AAAA,MAClB;AACA,UAAI,CAAC,eAAe,UAAU,SAAS;AACrC,cAAM,IAAI,MAAM,eAAe,UAAU,KAAK;AAAA,MAChD;AAEA,cAAQ,KAAK;AAAA,QACX,eAAe;AAAA,QACf,WAAW,eAAe,UAAU;AAAA,MACtC,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,MAAc,iBACZ,gBACA;AACA,UAAM,kBAAkB,MAAM,oBAAoB,cAAc;AAChE,QAAI,CAAC,iBAAiB;AACpB,YAAM,IAAI,MAAM,iBAAiB;AAAA,IACnC;AAEA,UAAM,OAAO,eAAe,UAAU;AACtC,QAAI,SAAS,KAAK,uBAAuB;AACvC,YAAM,IAAI,MAAM,wBAAwB;AAAA,IAC1C;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,MAAc,YACZ,SACA,QACA;AACA,UAAM,iBACJ,MAAM,KAAK,QAAQ,aAAa;AAAA,MAC9B;AAAA,MACA;AAAA,IACF;AACF,WAAO,MAAM,KAAK,iBAAiB,cAAc;AAAA,EACnD;AACF;;;ADnTO,IAAM,uBAAuB,CAAC,iBAA+B;AAClE,QAAM,EAAE,IAAI,IAAI,WAAW;AAC3B,QAAM,UAAU,IAAI;AACpB,QAAM,SAAS,QAAQ,KAAK,CAACC,YAAWA,QAAO,SAAS,kBAAkB;AAC1E,MAAI,QAAQ;AAIV,IAAC,OAAwB,gBAAgB,YAAY;AACrD,WAAO;AAAA,EACT;AAEA,QAAM,SAAS,IAAI,aAAa,YAAY;AAC5C,iBAAe,MAAM;AACrB,SAAO;AACT;","names":["CanvasInterface","wallet"]}